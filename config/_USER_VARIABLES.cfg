# =============================================================================
# STōN-WoLF USER VARIABLES
# =============================================================================
#
# This file contains ALL user-configurable settings for your STōN-WoLF printer.
# If you want to customize behavior, THIS is the file you edit.
#
# After making changes:
#   SAVE & RESTART (Or firmware restart.)
#
# DO NOT edit ston_macros.cfg or other macro files.
# All customization happens here by design.
#
# =============================================================================


[gcode_macro _USER_VARIABLES]
description: User-configurable variables for all STōN-WoLF macros

# NOTE:
# This macro stores variables ONLY.
# No gcode is executed from this section.


# =============================================================================
# PREHEAT DEFAULTS
# =============================================================================
variable_preheat_bed_default: 80         ; Default bed temp (°C)
variable_preheat_extruder_default: 160   ; Default extruder temp (°C)
variable_preheat_duration_default: 60    ; Default preheat duration (minutes)
variable_preheat_fan_speed: 128          ; Fan speed during preheat (0–255, 128 = 50%)


# =============================================================================
# PRINT START / END CONFIGURATION
# =============================================================================
variable_probe_offset_default: 60        ; Extruder temp offset during probing
                                         ; Example: Print 240°C → Probe at 180°C
variable_probe_temp_minimum: 150         ; Minimum probe temperature (°C)
variable_start_retract_before_mesh: 0.8  ; Retract before mesh to prevent ooze (mm)
variable_end_retract: 2.0                ; Retraction at print end (mm)
variable_end_lift: 5.0                   ; Z lift at print end (mm)
variable_end_park_offset: 10             ; Offset from Y max for end park (mm)


# =============================================================================
# MOVEMENT SPEEDS
# =============================================================================
variable_travel_speed: 12000             ; Fast travel (mm/min = 200mm/s)
variable_z_hop_speed: 600                ; Z-hop speed (mm/min = 10mm/s MAX)
variable_z_lift_speed: 600               ; End lift speed (mm/min = 10mm/s MAX)
variable_homing_travel_speed: 6000       ; Travel speed during homing (mm/min)


# =============================================================================
# WIPER CONFIGURATION
# =============================================================================
variable_wiper_installed: True           ; True = wiper pad installed, False = no wiper
variable_wipe_x: 76.5                    ; X center of wiper pad
variable_wipe_y: -7                      ; Y position (usually just off the front)
variable_wipe_z: 0                       ; Z height for wiping (TUNE CAREFULLY)
variable_wipe_dist: 30                   ; Wipe distance in mm (pad width)
variable_wipe_speed_1: 1200              ; Pass 1 speed (mm/min = 20mm/s)
variable_wipe_speed_2: 2400              ; Pass 2 speed (mm/min = 40mm/s)
variable_wipe_speed_3: 4800              ; Pass 3 speed (mm/min = 80mm/s)
variable_wipe_speed_4: 9600              ; Pass 4 speed (mm/min = 160mm/s)
variable_wipe_speed_5: 19200             ; Pass 5 speed (mm/min = 320mm/s)


# =============================================================================
# PURGE LINE CONFIGURATION
# =============================================================================
variable_purge_x_start: 5                ; X start position of purge line
variable_purge_y: 5                      ; Y position of purge line
variable_purge_z: 0.3                    ; Z height for purge (usually first layer)
variable_purge_length: 42                ; Length of purge line (mm)
variable_purge_extrude_1: 10             ; Extrusion for first pass (mm)
variable_purge_extrude_2: 20             ; Extrusion for second pass (mm)
variable_purge_speed: 1500               ; Purge speed (mm/min = 25mm/s)
variable_purge_z_min_safe: 0.2           ; Abort purge if Z is lower than this


# =============================================================================
# FILAMENT LOADING / UNLOADING
# =============================================================================
# LOAD_FILAMENT (heat extruder first)
variable_load_prime_length: 10
variable_load_prime_speed: 200           ; mm/min = 3.3mm/s - slow grab
variable_load_fast_length: 35
variable_load_fast_speed: 600            ; mm/min = 10mm/s - through extruder
variable_load_medium_length: 10
variable_load_medium_speed: 300          ; mm/min = 5mm/s - approaching hotend
variable_load_final_length: 35
variable_load_final_speed: 200           ; mm/min = 3.3mm/s - melt zone

# UNLOAD_FILAMENT (heat extruder first)
variable_unload_purge_length: 25
variable_unload_purge_speed: 900         ; mm/min = 15mm/s - clear nozzle
variable_unload_fast_length: 35
variable_unload_fast_speed: 1500         ; mm/min = 25mm/s - yank from hotend
variable_unload_slow_length: 10
variable_unload_slow_speed: 120          ; mm/min = 2mm/s - form clean tip
variable_unload_final_length: 50
variable_unload_final_speed: 1500        ; mm/min = 25mm/s - clear extruder


# =============================================================================
# FILAMENT CHANGE (M600)
# =============================================================================
variable_m600_z_min: 50                  ; Minimum Z height before filament change


# =============================================================================
# PARKING POSITIONS
# =============================================================================
# Leave X/Y as 0 to allow automatic positioning
variable_park_x: 0                       ; PARKFRONT X (0 = auto center)
variable_park_y: 0                       ; PARKFRONT Y (0 = auto front + offset)
variable_parklow_z: 20                   ; Z height for PARKFRONTLOW


# =============================================================================
# MAINSAIL / CLIENT BEHAVIOR
# =============================================================================
variable_pause_x: 150.0                  ; X position during PAUSE
variable_pause_y: 5.0                    ; Y position during PAUSE
variable_pause_dz: 2.0                   ; Z lift during PAUSE (mm)
variable_pause_retract: 0.0              ; Retraction during PAUSE (mm)
variable_cancel_retract: 0.0             ; Retraction during CANCEL (mm)
variable_cancel_x: 5                     ; X position during CANCEL
variable_cancel_y: 5                     ; Y position during CANCEL



# =============================================================================
# PROBE TARE DEFAULTS
# =============================================================================
variable_probe_settle_time: 500          ; ms - wait before tare
variable_probe_tare_wait: 500            ; ms - wait after tare

# stored configuration (power-user adjustable)
variable_tare_pulse_ms: 80               ; 80ms - tare pulse (<120 = tare only)
variable_filter_pulse_ms: 150            ; 150ms - filter level default Median=3 Savgol=3(120-200)
variable_threshold_pulse_ms: 160         ; 160ms - trigger threshold default scale=1.0(100-400)


# =============================================================================
# PERFORMANCE MODES (Used by ston_macros.cfg)
# =============================================================================
# Requires: [include macros/ston_macros.cfg] in printer.cfg
#
# STōN-WoLF Performance Modes
# QUIET - The prowl
# NORMAL - The hunt
# SPEED - The chase
# CUSTOM1-5 - Your pack, your rules
#
# =============================================================================

# Custom Slot 1
variable_custom1_name: "CUSTOM1"
variable_custom1_speed: 100
variable_custom1_velocity: 1400
variable_custom1_accel: 25000
variable_custom1_scv: 10
variable_custom1_fan: 1.0

# Custom Slot 2
variable_custom2_name: "CUSTOM2"
variable_custom2_speed: 100
variable_custom2_velocity: 1400
variable_custom2_accel: 25000
variable_custom2_scv: 10
variable_custom2_fan: 1.0

# Custom Slot 3
variable_custom3_name: "CUSTOM3"
variable_custom3_speed: 100
variable_custom3_velocity: 1400
variable_custom3_accel: 25000
variable_custom3_scv: 10
variable_custom3_fan: 1.0

# Custom Slot 4
variable_custom4_name: "CUSTOM4"
variable_custom4_speed: 100
variable_custom4_velocity: 1400
variable_custom4_accel: 25000
variable_custom4_scv: 10
variable_custom4_fan: 1.0

# Custom Slot 5
variable_custom5_name: "CUSTOM5"
variable_custom5_speed: 100
variable_custom5_velocity: 1400
variable_custom5_accel: 25000
variable_custom5_scv: 10
variable_custom5_fan: 1.0

# =============================================================================
# ADVANCED FEATURES
# =============================================================================
variable_use_tight_temp_control: True    ; True = ±1°C control, False = default ±5°C

gcode:
    # Variable container only – intentionally empty
